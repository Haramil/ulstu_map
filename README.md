# ULSTU_map Документация

# Запуск проекта

Для запуска проекта, находясь в директории с проектом необходимо прописать `npm i` для установки необходимых пакетов. 
Для запуска проекта в режиме разработки необходимо прописать `npm run start` 
Для запуска в прод. режиме `npm run prod`. После выполнения этой команды в корне проекта появляется папка `dist` в которой находиться собранный проект

# Файловая структура 

Все файлы карты хранятся в папке maps. Там карты сгруппированы по их типу:
- **с1** - карта первого корпуса
- **с2** - карта второго корпуса 
- **с3** - карта третьего корпуса
- **с4** - карта четвертого корпуса
- **с5** - карта пятого корпуса
- **с6** - карта шестого корпуса
- **global** - общая карта территории УлГТУ
- **iatu** - карта корпуса ИАТУ
- **other** - доп. карты, такие как библиотеки, спортзалы и “Тарелка” 

Каждая карта состоит из 3х файлов
- **data.json** - содержит в себе полную конфигурацию карты (см. пункт [“Общая структура](# Общая структура)”)
- **view.js** - содержит в себе верстку карты
- **index.js** - нужно для разработки
# Общая структура
    {
      "config": {
        "mapLabel": "c1-f0",
        "mapName": "c1-f1",
        "subdivisions": {
          "FIST": {
            "name": "ФИСТ",
            "color": "#F0826A"
          },
          "FIST1": {
            "name": "ФИСТ1",
            "color": "#66CE4B"
          },
          "FIST2": {
            "name": "ФИСТ2",
            "color": "#6D70DD"
          }
        },
        "prevMap": "c1-f0",
        "nextMap": "c1-f1a",
        "floorName": 1
      },
      "items": {}
    }
    
## Поле “config”
- **mapLabel** - заголовок карты который показывается над картой в интерфейсе
- **mapName** - название карты относительно которой строится внутренняя логика системы. На пример на это поле ссылается поле direction (см. пункт [“Структура объекта”](# Структура объекта))
- **subdivisions** - объект подразделения (см. пункт [“Подразделения (subdivisions)](# Подразделения (subdivisions))”), содержащий в себе описание всех подразделений на карте 
- **prevMap** - ссылка на название карты пред. этажа. На это поле ориентируются кнопки этажей в верхнем правом углу) 
- **nextMap** - аналогично **prevMap** но содержит ссылку на след. карту.
- **floorName** - номер этажа текущей карты.
## Поле “items”

Тут хранятся объекты карты (см. пункт [“Структура объекта”](# Структура объекта))
****
# Структура объекта 
        "c-n8": {
          "id": "c-n8",
          "name": "Корпус №4",
          "action": "move_info",
          "disc": "Описание 8",
          "direction": "c4-f1",
          "subdivision": "education",
          "additional": {
            "phone": "79999999999",
            "responsible": "Петренко А. В.",
            "workingHours": "08:00 - 09:00",
            "email": "ulstumail@gmail.com",
            "website": "https://ulstu.ru/",
            "timetable": "https://time.ulstu.ru/timetable"
          }
        },
- **id** - идентификатор объекта (должен совпадать с id группы в svg/view.js файле). Так же должен быть равен названию объекта (в первой строке кода выше)
- **name** - название объекта, оно будет отображаться в заголовке модального окна при нажатии на этот объект на карте 
- **action** - определяет тип объекта (см. пункт ["Типы объектов"](# Типы объектов))
- **disc** - описание объекта на карте. Данный текст будет выводиться под заголовком в модальном окне 
- **direction** - поле, в котором указывается название карты на которую ведет этот объект (при нажатии на сам объект если тип **move** или при нажатии на кнопку “Схема” если тип **move_info** (см. пункт “Типы объектов”))
- **subdivision** - подразделение к которому относиться объект (см. пункт ["Подразделения"](# Подразделения)) 
- **additional** - блок с дополнительной информацией об объекте 
    - ***phone*** - телефонный номер привязанный к аудитории 
    - ***responsible*** - лицо, ответственное за объект 
    - ***workingHours*** - часы работы объекта 
    - ***email*** - почта привязанная к объекту
    - ***website*** - ссылка на страницу привязанную к объекту 
    - ***timetable*** - ссылка на учебное расписание 

 

# Типы объектов

На карте возможны объекты след. типов

- **move_info** - обозначает что при нажатии на объект на карте появится модальное окно с информацией и кнопка “Схема” внизу по нажатию на которую происходит переход на нужную карту, название которой указано в поле **direction** в объекте.
- **info** - аналогично типу **move_info**, но внизу отсутствует кнопка “Схема” 
- **move** - аналогично типу **move_info**, но не показывается модальное окно, сразу происходит переход на нужную карту. К данному типу относятся переходы, лестницы и т. п. 
# Подразделения (subdivisions)

Поле в объекте карты, которое содержит в себе описание подразделений используемых на карте. Каждое подразделение состоит из полей:

- **name** - название подразделения. На это поле ссылаются объекты в которых указано *subdivision* 
- **color** - указывается цвет подразделения в который будут окрашиваться помещения на карте. (в HEX формате)

